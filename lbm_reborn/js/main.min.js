"use strict";var courseStructure={course:"Легко ли быть менеджером?",description:"Модульный курс для дистанционного обучения",chapters:[{chapter_id:1,title:"Введение",pages:[{page_id:1,title:"Введение, страница 1",location:"page01",type:"simple_page",messages:[""]},{page_id:2,title:"Введение, страница 2",location:"page02",type:"simple_page",messages:[""]},{page_id:3,title:"Введение, страница 3",location:"page03",type:"simple_page",messages:[""]}]},{chapter_id:2,title:"Глава 1",pages:[{page_id:1,title:"Page 1",location:"page01",type:"simple_page",messages:[""]},{page_id:2,title:"Page 2",location:"page02",type:"simple_page",messages:[""]},{page_id:3,title:"Page 3",location:"page03",type:"simple_page",messages:[""]},{page_id:4,title:"Page 4",location:"page04",type:"simple_page",messages:[""]},{page_id:5,title:"Page 5",location:"page05",type:"simple_page",messages:[""]},{page_id:6,title:"Задание 1",location:"page06",type:"exercise",messages:[""]},{page_id:7,title:"Вывод",location:"page07",type:"simple_page",messages:[""]},{page_id:8,title:"Вывод",location:"page08",type:"simple_page",messages:[""]},{page_id:9,title:"Вывод",location:"page09",type:"simple_page",messages:[""]},{page_id:10,title:"Вывод",location:"page10",type:"simple_page",messages:[""]},{page_id:11,title:"Задание 2",location:"page11",type:"exercise",messages:[""]},{page_id:12,title:"Вывод",location:"page12",type:"simple_page",messages:[""]},{page_id:13,title:"Задание 3",location:"page13",type:"exercise",messages:[""]},{page_id:14,title:"Задание 4",location:"page14",type:"exercise",messages:[""]},{page_id:15,title:"Вывод",location:"page15",type:"simple_page",messages:[""]},{page_id:16,title:"Вывод",location:"page16",type:"simple_page",messages:[""]},{page_id:17,title:"Вывод",location:"page17",type:"simple_page",messages:[""]}]},{chapter_id:3,title:"Глава 2",pages:[{page_id:1,title:"Page 1",location:"page01",type:"simple_page",messages:[""]},{page_id:2,title:"Page 2",location:"page02",type:"simple_page",messages:[""]},{page_id:3,title:"Page 3",location:"page03",type:"simple_page",messages:[""]},{page_id:4,title:"Задание 5",location:"page04",type:"exercise",data:{attempts:-1,shuffle:!0,showAnswer:!1,useVideo:!0,videoPoster:"img/video.svg",videoUrl:"video/r1.mp4",videoWidth:640,videoHeight:480,taskText:"Посмотрите киноэпизод. Прокомментируйте высказывания героя фильма. Раскрасте в зелёный цвет ты высказывания, с которыми согласны, а в красный те, с которыми не согласны.",questionList:[{label:"Мотивировать - это дело руководства: пусть зарплату повышают.",right:0},{label:"МотивОрганизовывать... тоже никого не надо, все знают, что им делать.",right:1},{label:"А вот контролировать - это нужно.",right:0},{label:"Надо наказывать почаще, а то избаловались, всё на начальство сваливают.",right:1},{label:"Правильный вариант для ассортимента.",right:1}]},messages:["Правильный ответ!","Ответ неверный!"]},{page_id:5,title:"Итоговое тестирование",location:"page_final_test",type:"test",messages:[""]}]}]},testStructure={tests:[{testId:0,caption:"final_test",type:"section",groups:[{caption:"group1",qUse:"all",questions:[{question:"Закончите предложение: «При реализации системы управления по целям устанавливают цели для выполнения работы и развития ...»",score:-1,status:"notanswered",type:"single",answers:[{label:"руководители",right:!1},{label:"руководители совместно с подчиненными",right:!0},{label:"сами подчиненные",right:!1}]},{question:"При управлении по целям интегрируются и реализуются:",score:-1,status:"notanswered",type:"single",answers:[{label:"Организационные, групповые и индивидуальные",right:!0},{label:"Организационные и групповые цели",right:!1},{label:"Организационные и индивидуальные цели",right:!1},{label:"Индивидуальные и групповые",right:!1}]},{question:"Первый этап процесса управления по целям – выработка ключевых результатов деятельности подразделения. Нормативное число ключевых результатов:",score:-1,status:"notanswered",type:"single",answers:[{label:"от 3 до 5",right:!1},{label:"от 6 до 8",right:!1},{label:"от 4 до 6",right:!0}]},{question:"Функция планирования отвечает на вопрос «ЧТО?», а функция организации – ...",score:-1,status:"notanswered",type:"multi",answers:[{label:"С какой целью?",right:!1},{label:"За что?",right:!1},{label:"Кто?",right:!0},{label:"Почему?",right:!1},{label:"Как?",right:!0},{label:"Когда?",right:!1}]},{question:"Закончите фразу: «Делегирование означает передачу прав и полномочий лицу, которое ...».",score:-1,status:"notanswered",type:"single",answers:[{label:"хочет их принять",right:!1},{label:"принимает на себя ответственность за их выполнение",right:!1},{label:"обязано их принять в силу должностных инструкций",right:!0}]}]}]}]};!function(){function e(e,t){e.state("page",{url:"/chapter/:chapter/page/:page",views:{header:{templateUrl:"js/components/header/headerTmpl.html",controller:"HeaderCtrl",controllerAs:"$ctrl"},content:{templateUrl:function(e){return"pages/"+(Number(e.chapter)>9?"chapter"+e.chapter:"chapter0"+e.chapter)+"/"+(Number(e.page)>9?"page"+e.page:"page0"+e.page)+"/index.html"},controller:"PageCtrl",controllerAs:"$ctrl"},footer:{templateUrl:"js/components/footer/footerTmpl.html",controller:"FooterCtrl",controllerAs:"$ctrl"}}})}function t(e,t,s,a,o,i){if(o.setAPIVersion("1.2"),o.doLMSInitialize(),o.LMSIsInitialized()){console.info("<:: Load from LMS ::>");var r=o.doLMSGetValue("cmi.suspend_data");alert("suspend_data >> "+r),r.length>0&&(i=JSON.parse(o.doLMSGetValue("cmi.suspend_data")),window.bookmark=i.bookmark,window.bookmark.loaded=!1),console.info("main:: courseInfo",i)}e.go("page",{chapter:i.bookmark.chapter,page:i.bookmark.chapterPage}),t.$on("$stateChangeStart",function(e,t,o,i){s.setBookmark(Number(o.page),Number(o.chapter)),a.sendToLMS()})}e.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["$state","$rootScope","staticService","userService","scormWrapper","courseInfo"],angular.module("courseApp",["ui.router","ngAnimate","vjs.video"]).constant("courseDataObj",courseStructure).constant("testDataObj",testStructure).constant("courseInfo",{bookmark:{page:1,chapterPage:1,chapter:1},excercises:[],testScore:0}).config(e).run(t)}(),function(){function e(){var e="Auto",t=!1,s=["Auto","1.2","2004"];this.setAPIVersion=function(t){t=t||"Auto",console.log("set SCORM ver:",t);var a=s.indexOf(t.toString());return a>-1?e=s[a]:console.log("Not found, default to Auto"),e},this.getAPIVersion=function(){return e},this.isAvailable=function(){return!0},this.doLMSInitialize=function(){return this.cmiBooleanToJs(this.getAPICall("LMSInitialize","Initialize")(""))},this.doLMSFinish=function(){return this.cmiBooleanToJs(this.getAPICall("LMSFinish","Terminate")(""))},this.doLMSGetValue=function(e){return this.getAPICall("LMSGetValue","GetValue")(e)},this.doLMSSetValue=function(e,t){return this.cmiBooleanToJs(this.getAPICall("LMSSetValue","SetValue")(e,t))},this.doLMSCommit=function(){return this.cmiBooleanToJs(this.getAPICall("LMSCommit","Commit")(""))},this.doLMSGetLastError=function(){return this.getAPICall("LMSGetLastError","GetLastError")()},this.doLMSGetErrorString=function(e){return this.getAPICall("LMSGetErrorString","GetErrorString")(e.toString())},this.doLMSGetDiagnostic=function(e){return this.getAPICall("LMSGetDiagnostic","GetDiagnostic")(e.toString())},this.LMSIsInitialized=function(){return t},this.ErrorHandler=function(){return this.getAPICall("LMSGetLastError","GetLastError")()},this.cmiBooleanToJs=function(e){return"1"===e||1===e||"true"===e||!0===e},this.getAPIHandle=function(){var e=window;e.parent&&e.parent!=e&&this.findAPI(e.parent),!t&&e.top.opener?this.findAPI(e.top.opener):t||console.log("Unable to find API adapter")},this.findAPI=function(s){var a=0;for(a;a<500;a++){if(s.API&&("1.2"===e||"Auto"===e)){t=s.API,e="1.2";break}if(s.API_1484_11&&("2004"===e||"Auto"===e)){t=s.API_1484_11,e="2004";break}s.parent&&s.parent!=s&&(a++,s=s.parent)}},this.getAPICall=function(s,a){if(!t&&(this.getAPIHandle(),!t))return function(){console.log("No API found, can't execute: "+s+" or "+a)};switch(e){case"2004":return function(){return t[a].apply(t,arguments)};case"1.2":return function(){return t[s].apply(t,arguments)}}}}angular.module("courseApp").service("scormWrapper",e)}(),function(){function e(e,t){var s=this,a=[{type:"menu",state:!1},{type:"stats",state:!1},{type:"about",state:!1},{type:"help",state:!1},{type:"exercise",state:!1},{type:"video",state:!1},{type:"cloak",state:!1}];this.getModalState=function(e){return a[e].state},this.showModal=function(e,t,o){a[e].state?a[e].state=!1:(s.closeModals(),"exercise"==a[e].type&&(document.getElementsByClassName("modal_head")[0].innerHTML=t,document.getElementsByClassName("modal_body")[0].innerHTML=o),a[e].state=!0,a[a.length-1].state=!0)},this.closeModals=function(e){a.forEach(function(e){e.state=!1})},this.getCourseName=function(){return{course:e.course,description:e.description}},this.getChapterObj=function(t){return e.chapters[t]},this.getChaptersTotal=function(){return e.chapters},this.getPageTotal=function(){for(var t=0,s=0;s<e.chapters.length;s++)t+=e.chapters[s].pages.length;return t},this.getBookmark=function(){return t.bookmark},this.setBookmark=function(s,a){if(console.warn("staticService:: try to setBookmark:",s,a),t.bookmark.chapterPage=s,t.bookmark.chapter=a,1==a)t.bookmark.page=s;else{for(var o=0,i=0;i<a-1;i++)o+=e.chapters[i].pages.length;t.bookmark.page=o+s}console.log("staticService:: setBookmark ChP: %d, Ch: %d, Page: %d",s,a,t.bookmark.page)},this.getData=function(t,s){return e.chapters[t.chapter-1].pages[t.page-1].data[s]},this.getMessage=function(t,s){return e.chapters[t.chapter-1].pages[t.page-1].messages[s]}}e.$inject=["courseDataObj","courseInfo"],angular.module("courseApp").service("staticService",e)}(),function(){function e(e,t,s,a,o){var i=this;e.chapters.map(function(e){return{id:e.id,visited:1,completed:!1,pages:e.pages.map(function(e,t){return{id:e.id,type:e.type,title:e.title,visited:0===t,completed:""}})}});this.exs=[],o.excercises.length>0?this.exs=o.excercises:(console.log("courseInfo.excercises.length",o.excercises.length),e.chapters.forEach(function(e,t,s){e.pages.map(function(e,s){"exercise"==e.type&&i.exs.push({id:e.id,chapterId:t,pageId:s,score:0,status:-1,title:e.title})})})),this.currentTestQuestion=null,this.setCurrentTestQuestion=function(e){i.currentTestQuestion=e},this.getExs=function(){return i.exs},this.getPageVisit=function(){},this.setPageVisit=function(e,t){},this.setUserProgress=function(e,t,s,a){i.exs.forEach(function(o,i,r){console.log("=>",o,s,a),o.chapterId==s&&o.pageId==a&&(o.score=e,o.status=t)}),console.log("userService:: setUserProgress > this.exs",i.exs),o.excercises=i.exs,i.sendToLMS()},this.sendToLMS=function(){a.doLMSSetValue("cmi.suspend_data",JSON.stringify(o)),a.doLMSSetValue("cmi.core.score.raw",o.testScore),o.testScore>=60?a.doLMSSetValue("cmi.core.lesson_status","completed"):a.doLMSSetValue("cmi.core.lesson_status","incomplete"),a.doLMSCommit()},this.closeCourse=function(){i.sendToLMS(),document.getElementsByClassName("course-wrapper")[0].innerHTML='<p class="close-msg">Работа с модулем курса завершена.</p>'}}e.$inject=["courseDataObj","testDataObj","$document","scormWrapper","courseInfo"],angular.module("courseApp").service("userService",e)}(),function(){function e(e,t,s,a,o){var i=this;i.$onInit=function(){e({method:"GET",url:"img/svg-sprite.svg",cache:!0}).then(function(e){i.svgSprite=t.trustAsHtml(e.data)},function(e){console.log("error svg sprite didn't load...")})},i.showModal=function(e){return a.getModalState(e)},i.visitedPage=function(e){return o.getPageProgress(Number(e)-1).visited},i.completedPage=function(e){return o.getPageProgress(Number(e)-1).completed}}e.$inject=["$http","$sce","$stateParams","staticService","userService"],angular.module("courseApp").controller("CourseCtrl",e)}(),function(){function e(e,t,s,a){this.tabNum=1,s.getModalState=function(e){return t.getModalState(e)},s.closeModals=function(){return t.closeModals()}}e.$inject=["$document","staticService","$scope","courseInfo"],angular.module("courseApp").controller("PageCtrl",e)}(),function(){function e(e,t,s){var a=this;this.play="#play",this.mute="#unmute",this.volume=1,this.$onInit=function(){a.audio=e[0].createElement("audio"),a.audio.src="pages/chapter"+a.module+"/page"+a.page+"/audio/page-"+a.module+"-"+a.page+".mp3",a.audio.oncanplaythrough=function(){var e=this;this.changePlayPause=function(){this.audio.paused?(this.audio.play(),this.play="#pause"):(this.audio.pause(),this.play="#play")},this.updateSeekSlider=function(){var t=e.audio.currentTime*(100/e.audio.duration),s=Math.floor(e.audio.currentTime/60),a=Math.floor(e.audio.currentTime-60*s),o=Math.floor(e.audio.duration/60),i=Math.floor(e.audio.duration-60*o);e.seekPos=Math.floor(t),s<10&&(s="0"+s),a<10&&(a="0"+a),o<10&&(o="0"+o),i<10&&(i="0"+i),e.curTime=s+":"+a,e.durTime=o+":"+i,e.audio.currentTime===e.audio.duration&&(e.play="#play")},this.changeSeekPos=function(){e.audio.currentTime=e.audio.duration*(e.seekPos/100)},t(function(){if(e.audio)return e.updateSeekSlider(),s.setAudioTime(e.audio.currentTime),s.getStopAudio()?(e.audio.pause(),void(e.audio=null)):void 0},100),this.changeMuteState=function(){e.mute="#unmute",e.audio.muted?(e.audio.muted=!1,e.mute="#unmute"):(e.audio.muted=!0,e.mute="#mute")},this.changeVolume=function(){e.audio.volume=e.volume},this.restart=function(){e.audio.currentTime=0,e.audio.play(),e.play="#pause"}}}}e.$inject=["$document","$interval","staticService"],angular.module("courseApp").component("customAudio",{bindings:{module:"@",page:"@"},templateUrl:"js/components/custom-audio/customAudioTmpl.html",controller:"CustomAudioCtrl",controllerAs:"$ctrl"}).controller("CustomAudioCtrl",e)}(),function(){function e(e,t,s,a,o){var i=this;window.bookmark?window.bookmark.loaded||(window.bookmark.loaded=!0,document.getElementsByClassName("paginator")[0].innerHTML=window.bookmark.page+" / "+s.getPageTotal(),s.setBookmark(window.bookmark.chapterPage,window.bookmark.chapter)):document.getElementsByClassName("paginator")[0].innerHTML=o.bookmark.page+" / "+s.getPageTotal(),this.bookmark=s.getBookmark(),this.coursePage=document.querySelector(".page-wrapper"),this.curChapterNum=Number(t.chapter),this.curPageNum=Number(t.page),this.pageAmountTotal=""+s.getPageTotal(),this.pageAmountChapter=s.getChapterObj(this.curChapterNum-1).pages.length,this.toBack=function(){1==i.curChapterNum&&1==i.curPageNum||(1==i.curPageNum?(i.curPageNum=s.getChapterObj(i.curChapterNum-2).pages.length,i.curChapterNum--):i.curPageNum--,s.setBookmark(i.curPageNum,i.curChapterNum),i.coursePage.classList.add("backward"),e.go("page",{chapter:i.curChapterNum,page:i.curPageNum}))},this.toForward=function(){i.curChapterNum==s.getChaptersTotal().length&&i.curPageNum==i.pageAmountChapter||(i.curPageNum==i.pageAmountChapter?(i.curChapterNum++,i.curPageNum=1):i.curPageNum++,s.setBookmark(i.curPageNum,i.curChapterNum),a.setPageVisit(i.curChapterNum-1,i.curPageNum),i.coursePage.classList.remove("backward"),e.go("page",{chapter:i.curChapterNum,page:i.curPageNum}))},this.toggleAbout=function(){},this.toggleHelp=function(){}}e.$inject=["$state","$stateParams","staticService","userService","courseInfo"],angular.module("courseApp").controller("FooterCtrl",e)}(),function(){function e(e,t,s,a,o,i,r,n){var c=this;this.questionList=_.shuffle(JSON.parse(JSON.stringify(o.tests[0].groups[0].questions))),this.currentQuest=0,this.state=0,e.$on("myTestState",function(e,t){c.state=t}),this.testScore=0,this.testTask=document.getElementsByClassName("test-task")[0],this.buildQuestion=function(){r.setCurrentTestQuestion(c.questionList[c.currentQuest]);var t="";switch(c.questionList[c.currentQuest].type){case"single":t='<task-single-choice test="true"></task-single-choice>';break;case"multi":t='<task-multi-choice test="true"></task-multi-choice>'}c.testTask.appendChild(s(t)(e)[0])},this.nextQuestion=function(e){e.target.classList.contains("btn_disabled")||(c.checkAnswer(),c.currentQuest++,c.currentQuest<c.questionList.length?(c.state=0,c.testTask.innerHTML="",c.buildQuestion()):(c.state=2,n.testScore=c.testScore/c.questionList.length,i.showModal(4,"Ваш результат: "+n.testScore+" баллов","<p>Комментарий к результату<p>"),r.sendToLMS()))},this.checkAnswer=function(){for(var e=document.getElementsByClassName("task-question"),t=0;t<e.length;t++){if(c.questionList[c.currentQuest].answers[t].right!==e[t].classList.contains("radio-selected"))return}c.testScore+=100},this.removeRestart=function(){c.state=0,c.testScore=0,c.currentQuest=0,c.questionList=_.shuffle(JSON.parse(JSON.stringify(o.tests[0].groups[0].questions))),c.testTask.innerHTML="",c.buildQuestion()},angular.element(document).ready(function(){c.buildQuestion()})}e.$inject=["$scope","$state","$compile","$stateParams","testDataObj","staticService","userService","courseInfo"],angular.module("courseApp").component("finalTest",{templateUrl:"js/components/final-test/finalTestTmpl.html",controller:"TestCtrl",controllerAs:"$ctrl"}).controller("TestCtrl",e)}(),function(){function e(e,t,s,a){var o=this;this.chapters=s.getChaptersTotal(),this.exercises=a.exs,this.getExs=function(){return a.getExs()},this.countExs=function(){return a.getExs().length},this.countDoneExs=function(){var e=a.getExs(),t=0;return e.forEach(function(e,s,a){1==e.status&&t++}),t},this.title={course:s.getCourseName().course,chapter:s.getChapterObj(Number(t.chapter)-1).title,exercise:this.chapters[Number(t.chapter)-1].pages[Number(t.page)-1].title},this.getModalState=function(e){return s.getModalState(e)},this.menuPagesCounter=1,this.countPages=function(){return o.menuPagesCounter++},this.coursePage=document.querySelector(".page-wrapper"),this.goFromMenu=function(a,i){console.log("HeaderCtrl:: goFromMenu, page: %d, chapter: %d, SP: %s, SC: %s",a.page_id,i.chapter_id,t.page,t.chapter),i.chapter_id>Number(t.chapter)?o.coursePage.classList.remove("backward"):i.id==Number(t.chapter)&&a.page_id>Number(t.page)?o.coursePage.classList.remove("backward"):o.coursePage.classList.add("backward"),e.go("page",{chapter:i.chapter_id,page:a.page_id}),s.closeModals()},this.getCurrent=function(){return s.getBookmark().page},this.toggleMenu=function(){s.showModal(0)},this.toggleStat=function(){s.showModal(1)},this.closeModals=function(){s.closeModals()},this.closeCourse=function(){a.closeCourse()},this.toggleVideo=function(){console.log("HeaderCtrl:: toggleVideo:"),s.showModal(5)}}e.$inject=["$state","$stateParams","staticService","userService"],angular.module("courseApp").controller("HeaderCtrl",e)}(),function(){function e(e,t,s){}e.$inject=["$element","$attrs","userService"],angular.module("courseApp").component("makeLine",{bindigs:{lineTo:"@"},controller:"LeaderLineCtrl"}).controller("LeaderLineCtrl",e)}(),function(){function e(e,t,s,a){var o=this;this.taskText=s.getData(t,"taskText"),s.getData(t,"shuffle")?this.questionList=_.shuffle(s.getData(t,"questionList")):this.questionList=s.getData(t,"questionList"),this.useVideo=s.getData(t,"useVideo"),this.videoPoster=s.getData(t,"videoPoster"),this.active=[],this.state=0,this.marker=-1,this.attemptNum=s.getData(t,"attempts"),this.userAttempt=0;for(var i=0;i<this.questionList.length;i++)this.active[i]={},this.active[i].selected=0,this.active[i].marker=-1;angular.element(document).ready(function(){o.useVideo&&(document.getElementsByClassName("btn_task-video")[0].style.background="url("+o.videoPoster+")"),o.selectMarker=function(e){o.marker=e},o.selectAnswer=function(e,t){-1!=o.marker&&2!=o.state&&(o.active[e].selected=1,o.active[e].marker=o.marker,t.currentTarget.setAttribute("data","marker"+o.marker),o.state=1)}}),this.checkAnswer=function(e){o.userAttempt===o.attemptNum&&(o.userAttempt=0),o.userAttempt++,o.state=2;for(var i=0;i<o.questionList.length;i++)if(o.questionList[i].rightAnswer!=o.active[i].marker)return 3===o.userAttempt&&console.log("taskSingleChoice:: attempt 3"),a.setUserProgress(0,0,Number(t.chapter)-1,Number(t.page)-1),void s.showModal(1,o.userAttempt,!1,Number(t.chapter)-1,Number(t.page)-1);console.log("taskSingleChoice:: упражнение верно"),a.setUserProgress(100,1,Number(t.chapter)-1,Number(t.page)-1),s.showModal(1,0,!0,Number(t.chapter)-1,Number(t.page)-1)},this.removeRestart=function(){for(var e=document.getElementsByClassName("task__marker-choice-item"),t=0;t<o.active.length;t++)o.active[t].selected=!1,o.active[t].marker=-1,e[t].setAttribute("data","");o.state=0,o.marker=-1,o.questionList=_.shuffle(o.questionList)},this.showVideo=function(){var e=document.querySelector(".modal_video");o.videoUrl=s.getData(t,"videoUrl"),console.warn("HeaderCtrl:: this.videoUrl:",o.videoUrl),o.videoPoster=s.getData(t,"videoPoster"),o.videoWidth=s.getData(t,"videoWidth"),o.videoHeight=s.getData(t,"videoHeight"),s.showModal(5);var a='<video class="video-js vjs-default-skin video-element" controls preload="auto"\n                               width="'+o.videoWidth+'" height="'+o.videoHeight+'" poster="'+o.videoPoster+'" vjs-video>\n                            <source src="'+o.videoUrl+'" type="video/mp4">\n                        </video>';e.innerHTML=a}}e.$inject=["$scope","$stateParams","staticService","userService"],angular.module("courseApp").component("taskMarkerChoice",{templateUrl:"js/components/task-marker-choice/taskMarkerChoiceTmpl.html",controller:"MarkerChoiceCtrl",controllerAs:"$ctrl"}).controller("MarkerChoiceCtrl",e)}(),function(){function e(e,t,s,a,o){var i=this;this.test=s.test,this.currentTestQuestion=o.currentTestQuestion,this.test?(this.taskText=this.currentTestQuestion.question,this.questionList=this.currentTestQuestion.answers,console.log("SingleCCtrl:: Answers:",this.questionList)):(this.taskText=a.getData(t,"taskText"),this.questionList=_.shuffle(a.getData(t,"questionList"))),this.active=[],this.state=0,this.test?this.attemptNum=-1:this.attemptNum=a.getData(t,"attempts"),this.userAttempt=0;for(var r=0;r<this.questionList.length;r++)this.active[r]={},this.active[r].selected=0;this.showComment=!1,angular.element(document).ready(function(){i.selectAnswer=function(t){i.active.forEach(function(e){e.selected=0}),i.active[t].selected=1,i.test&&e.$emit("myTestState",1),i.state=1},i.checkAnswer=function(e){if(!e.target.classList.contains("btn_disabled")){i.userAttempt===i.attemptNum&&(i.userAttempt=0),i.userAttempt++,i.state=2;for(var s=0;s<i.questionList.length;s++)if(console.log("taskSingleChoice:: упражнение не верно"),i.questionList[s].right!==i.active[s].selected)return 3===i.userAttempt&&console.log("taskSingleChoice:: attempt 3"),o.setUserProgress(0,0,Number(t.chapter)-1,Number(t.page)-1),void a.showModal(1,i.userAttempt,!1,Number(t.chapter)-1,Number(t.page)-1);console.log("taskSingleChoice:: упражнение верно"),o.setUserProgress(100,1,Number(t.chapter)-1,Number(t.page)-1),a.showModal(1,0,!0,Number(t.chapter)-1,Number(t.page)-1)}},i.removeRestart=function(){for(var e=0;e<i.active.length;e++)i.active[e].selected=!1;i.state=0,i.questionList=_.shuffle(i.questionList)}})}e.$inject=["$scope","$stateParams","$attrs","staticService","userService"],angular.module("courseApp").component("taskSingleChoice",{templateUrl:"js/components/task-single-choice/taskSingleChoiceTmpl.html",controller:"SingleChoiceCtrl",controllerAs:"$ctrl"}).controller("SingleChoiceCtrl",e)}(),function(){function e(e,t,s,a,o){var i=this;this.test=s.test,this.currentTestQuestion=o.currentTestQuestion,this.test?(this.taskText=this.currentTestQuestion.question,this.questionList=this.currentTestQuestion.answers,console.log("MultiCCtrl:: Answers:",this.questionList)):(this.taskText=a.getData(t,"taskText"),this.questionList=a.getData(t,"questionList")),this.active=[],this.state=0,this.test?this.attemptNum=-1:this.attemptNum=a.getData(t,"attempts"),this.userAttempt=0;for(var r=0;r<this.questionList.length;r++)this.active[r]={},this.active[r].selected=0;this.showComment=!1,angular.element(document).ready(function(){i.selectAnswer=function(t){i.active[t].selected=!i.active[t].selected;for(var s=!1,a=0;a<i.active.length;a++)if(i.active[a].selected){s=!0;break}s?(i.test&&e.$emit("myTestState",1),i.state=1):(i.test&&e.$emit("myTestState",0),i.state=0)},i.checkAnswer=function(e){if(!e.target.classList.contains("btn_disabled")){i.userAttempt===i.attemptNum&&(i.userAttempt=0),i.userAttempt++,i.state=2;for(var s=0;s<i.questionList.length;s++)if(console.log("taskMultiChoice:: упражнение не верно"),i.questionList[s].right!==i.active[s].selected)return 3===i.userAttempt&&console.log("taskMultiChoice:: attempt 3"),o.setUserProgress(0,0,Number(t.chapter)-1,Number(t.page)-1),void a.showModal(1,i.userAttempt,!1,Number(t.chapter)-1,Number(t.page)-1);console.log("taskMultiChoice:: упражнение верно"),o.setUserProgress(100,1,Number(t.chapter)-1,Number(t.page)-1),a.showModal(1,0,!0,Number(t.chapter)-1,Number(t.page)-1)}},i.removeRestart=function(){for(var e=0;e<i.active.length;e++)i.active[e].selected=!1;i.state=0,i.questionList=_.shuffle(i.questionList)}})}e.$inject=["$scope","$stateParams","$attrs","staticService","userService"],angular.module("courseApp").component("taskMultiChoice",{templateUrl:"js/components/task-multi-choice/taskMultiChoiceTmpl.html",controller:"MultiChoiceCtrl",controllerAs:"$ctrl"}).controller("MultiChoiceCtrl",e)}(),function(){function e(){angular.element(document).ready(function(){function e(e,t){if(e.classList.contains("task-swap-list_item__fixed"))return void console.warn("drop on fixed");var s=e.parentNode,a=e.nextSibling===t?e:e.nextSibling;t.parentNode.insertBefore(e,t),s.insertBefore(t,a),t.style.left="0px",t.style.top="0px"}$(function(){$(".task-swap-list_item").draggable({zIndex:2,start:function(e,t){},stop:function(e,t){console.log(t),t.helper[0].style.top="0px",t.helper[0].style.left="0px"}}).droppable({drop:function(t,s){console.log("куда =>",$(this).get(0)),console.log("что =>",$(s.draggable).get(0)),e($(this).get(0),$(s.draggable).get(0))}})})})}angular.module("courseApp").component("taskSwapList",{templateUrl:"js/components/task-swap-list/taskSwapListTmpl.html",controller:"SwapListCtrl",controllerAs:"$ctrl"}).controller("SwapListCtrl",e)}();