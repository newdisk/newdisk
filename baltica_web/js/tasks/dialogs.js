!function(e,a){"use strict";function t(a){e(l).hasClass("active")?(e(parent.frames.myframe.document).find(".slide-block").slideDown(),e(l).removeClass("active"),e(c).removeClass("activated"),e(parent.frames.myframe.document).find(".dialog__wrapper").attr("style","display: none")):(e(parent.frames.myframe.document).find(".slide-block").slideUp(),e(l).addClass("active"),e(c).addClass("activated"),e(parent.frames.myframe.document).find(".dialog__wrapper").removeAttr("style")),0===i&&r(),i++}function r(){var a=e(parent.frames.myframe.document).find(".animate");if(0!==a.length)for(var t=0;t<a.length;t++)e(a[t]).animate({opacity:0},0).delay(2e3*(t+1)).animate({opacity:1},500)}function n(t,r){u=r.draggable,p=e(u[0]).clone().addClass("clone").appendTo(e(parent.frames.myframe.document).find(".dialog__wrapper")),u.addClass("unvisible");var n=e(f[0]).find(".dialog__item"),s=e(p[0]).find(".dialog__item");s.context.style.position="absolute",s.context.style.top=n.offset().top+"px",s.context.style.left=n.offset().left+"px",e(u).attr("id")==o?a.sendResult(1,100,'<p class="feedback__text">'+d[parseFloat(e(u).attr("id"))-1]+"</p>"):a.sendResult(-1,0,'<p class="feedback__text">'+d[parseFloat(e(u).attr("id"))-1]+"</p>"),m.draggable({disabled:!0})}function s(){e(p).remove(),e(u).removeClass("unvisible"),m=e(parent.frames.myframe.document).find(".item");for(var a=0;a<m.length;a++)if(Math.random()<.5&&0!==a){var t=e(m[a]).attr("src"),r=e(m[a]).attr("id");e(m[a]).attr("src",e(m[a-1]).attr("src")).attr("id",e(m[a-1]).attr("id")),e(m[a-1]).attr("src",t).attr("id",r)}else if(a!==m.length-1){var t=e(m[a]).attr("src"),r=e(m[a]).attr("id");e(m[a]).attr("src",e(m[a+1]).attr("src")).attr("id",e(m[a+1]).attr("id")),e(m[a+1]).attr("src",t).attr("id",r)}m.draggable({disabled:!1}),m.load()}var d=a.structure.pages[a.bookmark].messages,o=a.structure.pages[a.bookmark].answers,i=0,l=e(parent.frames.myframe.document).find(".slide-block__arrow");l.on("click",t);var c=e(parent.frames.myframe.document).find(".slide-block__toggle"),m=e(parent.frames.myframe.document).find(".item");m.draggable({zIndex:2,containment:"document",revert:!0});var f=e(parent.frames.myframe.document).find(".basket");f.droppable({drop:n});var p,u,g=e(parent.frames.myframe.document).find(".btn--restart");g.on("click",s),a.coursePage={play:function(){s()},stop:function(){e(l).off("click"),g.off("click"),m.draggable("destroy"),f.droppable("destroy"),a.coursePage=null},restart:function(){s()}}}(parent.jQuery,parent.ctrl),parent.ctrl.coursePage.play();