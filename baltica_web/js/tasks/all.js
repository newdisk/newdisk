!function(e,a){"use strict";function t(a){e(l).hasClass("active")?(e(parent.frames.myframe.document).find(".slide-block").slideDown(),e(l).removeClass("active"),e(c).removeClass("activated"),e(parent.frames.myframe.document).find(".dialog__wrapper").attr("style","display: none")):(e(parent.frames.myframe.document).find(".slide-block").slideUp(),e(l).addClass("active"),e(c).addClass("activated"),e(parent.frames.myframe.document).find(".dialog__wrapper").removeAttr("style")),0===i&&r(),i++}function r(){var a=e(parent.frames.myframe.document).find(".animate");if(0!==a.length)for(var t=0;t<a.length;t++)e(a[t]).animate({opacity:0},0).delay(2e3*(t+1)).animate({opacity:1},500)}function n(t,r){u=r.draggable,p=e(u[0]).clone().addClass("clone").appendTo(e(parent.frames.myframe.document).find(".dialog__wrapper")),u.addClass("unvisible");var n=e(f[0]).find(".dialog__item"),s=e(p[0]).find(".dialog__item");s.context.style.position="absolute",s.context.style.top=n.offset().top+"px",s.context.style.left=n.offset().left+"px",e(u).attr("id")==o?a.sendResult(1,100,'<p class="feedback__text">'+d[parseFloat(e(u).attr("id"))-1]+"</p>"):a.sendResult(-1,0,'<p class="feedback__text">'+d[parseFloat(e(u).attr("id"))-1]+"</p>"),m.draggable({disabled:!0})}function s(){e(p).remove(),e(u).removeClass("unvisible"),m=e(parent.frames.myframe.document).find(".item");for(var a=0;a<m.length;a++)if(Math.random()<.5&&0!==a){var t=e(m[a]).attr("src"),r=e(m[a]).attr("id");e(m[a]).attr("src",e(m[a-1]).attr("src")).attr("id",e(m[a-1]).attr("id")),e(m[a-1]).attr("src",t).attr("id",r)}else if(a!==m.length-1){var t=e(m[a]).attr("src"),r=e(m[a]).attr("id");e(m[a]).attr("src",e(m[a+1]).attr("src")).attr("id",e(m[a+1]).attr("id")),e(m[a+1]).attr("src",t).attr("id",r)}m.draggable({disabled:!1}),m.load()}var d=a.structure.pages[a.bookmark].messages,o=a.structure.pages[a.bookmark].answers,i=0,l=e(parent.frames.myframe.document).find(".slide-block__arrow");l.on("click",t);var c=e(parent.frames.myframe.document).find(".slide-block__toggle"),m=e(parent.frames.myframe.document).find(".item");m.draggable({zIndex:2,containment:"document",revert:!0});var f=e(parent.frames.myframe.document).find(".basket");f.droppable({drop:n});var p,u,g=e(parent.frames.myframe.document).find(".btn--restart");g.on("click",s),a.coursePage={play:function(){s()},stop:function(){e(l).off("click"),g.off("click"),m.draggable("destroy"),f.droppable("destroy"),a.coursePage=null},restart:function(){s()}}}(parent.jQuery,parent.ctrl),parent.ctrl.coursePage.play();
!function(e,a,s){"use strict";function t(){m.on("click",l).addClass("disabled").attr("disabled",!0),h.on("click",d);var e="";f=s.shuffle(f);for(var a=0;a<f.length;a++)e+='<div class="page__item-wrapper1"><div class="page__item-wrapper2"><div class="page__item" right="'+f[a].right+'"><div class="page__item-before"></div><p>'+f[a].label+"</p>",e+=f[a].image.length>0?'<img src="'+f[a].image+'" class="page__item-wrapper--image"></div></div></div>':"</div></div></div>";u.empty().append(e),n=o.find(".page__item"),n.on("click",i)}function i(a){if(!y){m.attr("disabled",!1).removeClass("disabled"),"singlechoice"==v?(n.removeClass("selected"),e(this).addClass("selected")):e(this).hasClass("selected")?e(this).removeClass("selected"):e(this).addClass("selected");var s=!1;n.each(function(a,t){e(t).hasClass("selected")&&(s=!0)}),s?m.attr("disabled",!1).removeClass("disabled"):m.attr("disabled",!0).addClass("disabled")}}function r(){m.off("click"),h.off("click"),n.off("click")}function d(){y=!1,r(),t()}function l(){y=!0,n.addClass("disabled"),m.attr("disabled",!0).addClass("disabled");var s=!0,t=0,i=0;n.each(function(a,r){"true"===e(r).attr("right")&&i++,e(r).hasClass("selected")&&"true"!==e(r).attr("right")&&(s=!1),e(r).hasClass("selected")&&"true"===e(r).attr("right")&&t++}),s&&t==i?(k=1,C=100,_=p[0],P=g[0],c()):(k=-1,C=0,_=p[b+1],P=g[1],j&&b++,j&&b==p.length&&(C=2,b=0,w=!0,P=g[2])),a.sendResult(k,C,_,w,P)}function c(){n.each(function(a,s){e(s).removeClass("selected"),"true"==e(s).attr("right")&&e(s).addClass("show-right")})}var n,o=e(parent.frames.myframe.document),u=o.find("#task-body"),f=a.structure.pages[a.bookmark].answers,p=a.structure.pages[a.bookmark].messages,g=a.structure.pages[a.bookmark].headComment,m=o.find("#btn--answer"),h=o.find("#btn--restart"),v=o.find("#task-container").attr("class"),b=0,C=0,k=-1,_="",w=!1,y=!1,P="Комментарий к ответу",j=Number(o.find("#task-container").attr("useAttempt"));a.coursePage={play:function(){t()},stop:function(){r(),a.coursePage=null},restart:function(){d()}}}(parent.jQuery,parent.ctrl,parent._),parent.ctrl.coursePage.play();