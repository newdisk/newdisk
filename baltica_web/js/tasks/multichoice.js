!function(e,a,s){"use strict";function t(){m.on("click",l).addClass("disabled").attr("disabled",!0),h.on("click",d);var e="";f=s.shuffle(f);for(var a=0;a<f.length;a++)e+='<div class="page__item-wrapper1"><div class="page__item-wrapper2"><div class="page__item" right="'+f[a].right+'"><div class="page__item-before"></div><p>'+f[a].label+"</p>",e+=f[a].image.length>0?'<img src="'+f[a].image+'" class="page__item-wrapper--image"></div></div></div>':"</div></div></div>";u.empty().append(e),n=o.find(".page__item"),n.on("click",i)}function i(a){if(!y){m.attr("disabled",!1).removeClass("disabled"),"singlechoice"==v?(n.removeClass("selected"),e(this).addClass("selected")):e(this).hasClass("selected")?e(this).removeClass("selected"):e(this).addClass("selected");var s=!1;n.each(function(a,t){e(t).hasClass("selected")&&(s=!0)}),s?m.attr("disabled",!1).removeClass("disabled"):m.attr("disabled",!0).addClass("disabled")}}function r(){m.off("click"),h.off("click"),n.off("click")}function d(){y=!1,r(),t()}function l(){y=!0,n.addClass("disabled"),m.attr("disabled",!0).addClass("disabled");var s=!0,t=0,i=0;n.each(function(a,r){"true"===e(r).attr("right")&&i++,e(r).hasClass("selected")&&"true"!==e(r).attr("right")&&(s=!1),e(r).hasClass("selected")&&"true"===e(r).attr("right")&&t++}),s&&t==i?(k=1,C=100,_=p[0],P=g[0],c()):(k=-1,C=0,_=p[b+1],P=g[1],j&&b++,j&&b==p.length&&(C=2,b=0,w=!0,P=g[2])),a.sendResult(k,C,_,w,P)}function c(){n.each(function(a,s){e(s).removeClass("selected"),"true"==e(s).attr("right")&&e(s).addClass("show-right")})}var n,o=e(parent.frames.myframe.document),u=o.find("#task-body"),f=a.structure.pages[a.bookmark].answers,p=a.structure.pages[a.bookmark].messages,g=a.structure.pages[a.bookmark].headComment,m=o.find("#btn--answer"),h=o.find("#btn--restart"),v=o.find("#task-container").attr("class"),b=0,C=0,k=-1,_="",w=!1,y=!1,P="Комментарий к ответу",j=Number(o.find("#task-container").attr("useAttempt"));a.coursePage={play:function(){t()},stop:function(){r(),a.coursePage=null},restart:function(){d()}}}(parent.jQuery,parent.ctrl,parent._),parent.ctrl.coursePage.play();